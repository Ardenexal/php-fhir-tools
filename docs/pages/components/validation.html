---
layout: docs
title: Validation
category: components
---

# Validation

<div class="coming-soon-banner">
    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M12 6v6l4 2"></path>
    </svg>
    <div>
        <h2>Coming Soon</h2>
        <p>The Validation component is currently under development and will be released in a future version.</p>
    </div>
</div>

<div class="existing-validators-note" style="background: #e8f5e9; border: 1px solid #4caf50; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem;">
    <strong>Note:</strong> Basic validation is already available in the Serialization component. You can use
    <code>Ardenexal\FHIRTools\Component\Serialization\Validator\FHIRValidator</code> for general FHIR resource validation
    and <code>Ardenexal\FHIRTools\Component\Serialization\Validator\FHIRSchemaValidator</code> for schema-based validation.
    The dedicated Validation component described below will provide more advanced features.
</div>

## Planned Features

The Validation component will provide comprehensive FHIR resource validation with support for:

### 1. Schema Validation

Validate resources against FHIR structure definitions:

- **Required Fields**: Ensure all mandatory elements are present
- **Cardinality**: Validate min/max occurrence constraints
- **Data Types**: Verify correct data types for all elements
- **Value Sets**: Validate coded values against value sets
- **References**: Check reference integrity

```php
// Planned API
use Ardenexal\FHIRTools\Component\Serialization\Validator\FHIRValidator;

$validator = new FHIRValidator();

$result = $validator->validateSchema($patient);

if (!$result->isValid()) {
    foreach ($result->getIssues() as $issue) {
        echo $issue->getMessage();
    }
}
```

### 2. Profile Validation

Validate against implementation guides and profiles:

- **US Core**: US Core Implementation Guide profiles
- **International Patient Summary**: IPS profiles
- **Custom Profiles**: Your own structure definitions
- **Multiple Profiles**: Validate against multiple profiles

```php
// Planned API
$result = $validator->validateProfile(
    $patient,
    'http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient'
);
```

### 3. Terminology Validation

Integration with terminology services:

- **ValueSet Expansion**: Expand and cache value sets
- **Code Validation**: Validate codes against value sets
- **Display Validation**: Check display values
- **tx.fhir.org Integration**: Use public terminology server
- **Local Terminology**: Support for local term servers

```php
// Planned API
$result = $validator->validateTerminology($observation, [
    'tx_server' => 'https://tx.fhir.org/r4'
]);
```

### 4. Business Rules

Custom validation rules:

- **FHIRPath Constraints**: Define rules using FHIRPath
- **Custom Validators**: Write PHP validation logic
- **Invariants**: Enforce FHIR invariants
- **Cross-Resource**: Validate relationships between resources

```php
// Planned API
$validator->addRule('age-check', function($patient) {
    $birthDate = new DateTime($patient->birthDate);
    $age = $birthDate->diff(new DateTime())->y;
    return $age >= 18;
}, 'Patient must be 18 or older');
```

### 5. OperationOutcome Generation

All validation results as FHIR OperationOutcome:

- **Structured Errors**: FHIR-compliant error reporting
- **Severity Levels**: error, warning, information
- **FHIRPath Expressions**: Precise error locations
- **Detailed Diagnostics**: Helpful error messages

```php
// Planned API
$outcome = $validator->validate($patient);

// Returns OperationOutcome resource
// {
//   "resourceType": "OperationOutcome",
//   "issue": [{
//     "severity": "error",
//     "code": "required",
//     "details": {"text": "Missing required field"},
//     "expression": ["Patient.name"]
//   }]
// }
```

## Feature Mockups

### Validation Dashboard

Visual representation of planned validation UI:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ FHIR Resource Validator                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                 ‚îÇ
‚îÇ Resource Type: [Patient ‚ñº]                     ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ Validation Profiles:                            ‚îÇ
‚îÇ ‚òë FHIR R4 Base                                 ‚îÇ
‚îÇ ‚òë US Core Patient                              ‚îÇ
‚îÇ ‚òê International Patient Summary                ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ Terminology Server:                             ‚îÇ
‚îÇ [tx.fhir.org        ‚ñº]                         ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ [Validate Resource]                             ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ Results: 3 errors, 1 warning                    ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ ‚ùå ERROR: Missing required field               ‚îÇ
‚îÇ    Location: Patient.name                       ‚îÇ
‚îÇ    Fix: Add at least one name                   ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ ‚ùå ERROR: Invalid code                         ‚îÇ
‚îÇ    Location: Patient.gender                     ‚îÇ
‚îÇ    Code: 'unknown-gender' not in valueset       ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ ‚ö†Ô∏è  WARNING: Display value mismatch             ‚îÇ
‚îÇ    Location: Patient.identifier[0].type         ‚îÇ
‚îÇ                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Interactive Validator

Planned browser-based validation tool:

- Paste FHIR JSON/XML
- Select profiles to validate against
- Choose terminology server
- View results with syntax highlighting
- Export OperationOutcome
- Fix suggestions

## Implementation Roadmap

### Phase 1: Schema Validation (Q1 2025)

- Basic structure validation
- Required field checks
- Data type validation
- Cardinality constraints

### Phase 2: Profile Validation (Q2 2025)

- Load structure definitions
- Validate against profiles
- Support for slicing
- Extension validation

### Phase 3: Terminology Integration (Q3 2025)

- tx.fhir.org integration
- ValueSet expansion
- Code validation
- Local terminology support

### Phase 4: Interactive Tools (Q4 2025)

- Web-based validator
- CLI validation tool
- IDE integration
- CI/CD integration

## How to Provide Feedback

We'd love to hear your input on the Validation component:

- **GitHub Discussions**: [Join the conversation](https://github.com/Ardenexal/php-fhir-tools/discussions)
- **GitHub Issues**: [Feature requests](https://github.com/Ardenexal/php-fhir-tools/issues)
- **Email**: Contact the maintainers

## Temporary Alternatives

While we develop the full Validation component, you can use the following options. Note that `FHIRValidator` and `FHIRSchemaValidator` already exist in the Serialization component (`Ardenexal\FHIRTools\Component\Serialization\Validator\`) and cover basic validation needs such as schema validation and resource structure checks.

### Existing Validators in Serialization Component

```php
use Ardenexal\FHIRTools\Component\Serialization\Validator\FHIRValidator;
use Ardenexal\FHIRTools\Component\Serialization\Validator\FHIRSchemaValidator;

// General FHIR resource validation
$validator = new FHIRValidator();
$result = $validator->validate($resource);

// Schema-based validation
$schemaValidator = new FHIRSchemaValidator();
$result = $schemaValidator->validate($resource);
```

### Manual Validation

```php
function validatePatient($patient): array {
    $errors = [];

    if (empty($patient->name)) {
        $errors[] = 'Patient must have at least one name';
    }

    if (empty($patient->id)) {
        $errors[] = 'Patient must have an ID';
    }

    return $errors;
}
```

### External Validators

- [FHIR Validator (Java)](https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator)
- [Firely Terminal](https://fire.ly/products/firely-terminal/)
- [HAPI FHIR Validator](https://hapifhir.io/hapi-fhir/docs/validation/introduction.html)

### Online Validators

- [HL7 FHIR Validator](https://validator.fhir.org/)
- [Simplifier.net Validator](https://simplifier.net/validate)

## Stay Updated

Follow development progress:

- ‚≠ê [Star on GitHub](https://github.com/Ardenexal/php-fhir-tools)
- üì¢ [Watch for updates](https://github.com/Ardenexal/php-fhir-tools/subscription)
- üìù [Read the changelog](../changelog.html)

## Next Steps

- [Serialization Component](serialization.html) - JSON/XML serialization
- [FHIRPath Component](fhirpath.html) - Query resources
- [Models Component](models.html) - FHIR resource models
- [API Reference](../api-reference.html) - Current API documentation

<style>
.coming-soon-banner {
    display: flex;
    gap: var(--spacing-6);
    align-items: center;
    padding: var(--spacing-8);
    background: linear-gradient(135deg, var(--color-primary-light), var(--color-secondary-light));
    border-radius: var(--radius-lg);
    margin-bottom: var(--spacing-8);
}

.coming-soon-banner svg {
    flex-shrink: 0;
    color: var(--color-primary);
}

.coming-soon-banner h2 {
    margin: 0 0 var(--spacing-2) 0;
    color: var(--color-primary);
}

.coming-soon-banner p {
    margin: 0;
    color: var(--color-gray-700);
}
</style>
